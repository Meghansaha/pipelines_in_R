---
title: "Making Data Pipelines in R:"
subtitle: "A Story From A 'Self-Taught' Perspective"
author: "Meghan Harris, MPH"
institute: "RStudio::conf(2022) | Washington D.C, U.S"
date: "27/07/2022 - July 27th, 2022"
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      ratio: '16:9'
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: true
    css:
      - "scripts/style.css"
      - "scripts/animation.css"
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
xaringanExtra::use_slide_tone()
xaringanExtra::use_freezeframe(responsive = FALSE)
```

class: dark, center, middle, animated, fadeIn

<img src= "images/initial_dream.png", width = "100%", height = "100%">

???
So I have a story to tell you all about making data pipelines in R, but before I get into that, I have a question to ask all of you. You don't have to answer me out loud, but...
<br><br><br>
When you see this image... Does it make you feel anything? Any ideas on what it is?


<br><br>
Well, this is my personal, 100% accurate representation of a data pipeline. Now you're probably thinking I'm out of my mind, and I might be, but hear me out. Of course this isn't an actual data pipeline, but rather the mental image and feelings I had in my last position as a Data specialist when I was tasked with creating a data pipeline from scratch. 
<br><br>
The story I want to tell you all today is about how I created that pipeline in R within the context of me being a self-taught R programmer in my first professional data position.
<br><br>
Those of us that work in data, when we think of data pipelines, it might look something more like this...
---
class: dark, center, middle, animated, fadeIn

<img src= "images/perfectpipe.png", width = "100%", height = "100%">

???
The "Perfect" Data Pipeline:
Nice clear proccess, clean structures, with great results
<br>
<br>
This is a pipeline to most of us, but in this last position I was in, the pipeline looked nothing like that at all. If we could say there was any pipeline, it was very manual, very clunky, no structure, no automation, just vibes and recklessness. So although I learned a lot and have alot to share, I don't have a lot of time to talk today, so I pulled out four main points that I learned about creating pipelines during this journey.
---
class: light, animated, fadeIn

<h1><span>Main Points</span></h1>
<br><br>
<center><img src= "images/mainpoints.png", width = "100%"></center>

???
-My first encounters with the data in this pipeline<br>
-The importance of identifying the environmental structures of the data pipeline<br>
-Embedding validations within the data pipeline<br>
-Understanding what sustainability looks like for the data pipeline


---
class: light, animated, fadeIn

<h1><span>Main Points</span></h1>
<br><br>
<center><img src= "images/mp_1.png", width = "100%"></center>

???
So I think the best thing for me to do is go back to the beginning, during those first encounters I had with this pipeline's data within this position.
<br><br>
Now I know, I'm going to sound like I'm out of my mind again, but guys, the very first thing I learned during my first encounters in this journey was that...

---
class: light, animated, fadeIn

<h1><span>First Encounters</span></h1>

<center><br><br><br>
<p><i><font size = "48px">"The first step to building a data pipeline in R, <font color = "#A21152">is to <b>NOT</b> open R.</font>"</font></i></p>
</center>

???
sounds counter-intuitive...<br>
Let me give you some context..
---
class: light, animated, fadeIn
<h1><span>First Encounters</span></h1>

<img src="images/me.png" alt="A picture of Meghan Harris on her first day of work as a Data Specialist." width="25%"; height="25%"; style="float: left; margin-top:100px;">

<p style="float: right;"><h2><b>Some Facts:</b></h2>
 <ul><li>Unfamiliar subject matter - opioid data</li><br>
     <li>A lot of data existed everywhere</li><br>
     <li>Organization did not have any pipelines</li><br>
     <li>Organization's expectations weren't clear</li><br>
    <li>No direction was given...</li></ul></p>
     
???
Some facts about how it was starting in this position...
- Not familiar with things<br>
- Data was everywhere<br>
- Organization didn't have pipelines, or expectations<br>
- thus -> No direction given...what's a newbie like myself to do?

---
class: light, animated, fadeIn
<h1><span>First Encounters</span></h1>

<h2><b>So What Did I Do?</b></h2>

<center>
<img class = "gif"; src="images/headfirst.gif" width = "400px", height = "300px">
</center>
     
???
Jumped in head-first of course! Because what else was I going to do? <br>
I had to open RStudio as soon as I got data of course!

---
class: light, animated, fadeIn
<h1><span>First Encounters</span></h1>

<h3><b>What I did vs. <font color = "#A21152"><i>What I Should Have Done</i></font></b></h3>

<center><br><br><br>
<b>I tried to create R programs immediately.</b>
<br><br>
--
<b><i><font color = "#A21152">I should have started investigating instead.</font></i></b><br><br>

</center>

???
I aruge this point with an real-life example of something that happened to me at work<br>
---
class: light, animated, fadeIn
<h1><span>First Encounters</span></h1>

<h2><b>The Narcan Story</b></h2>


<center><img src= "images/narcan.png" height = "200px"><br><br>
--
<b><i><font color = "#A21152">0,1,2,3 are numbers...right?</font></i></b><br>
--
<b><i><font color = "#5c0e0b">ðŸš¨"4+" is not...ðŸš¨</font></i></b><br><br>

</center>

???
Narcan is a medication that reverses opioid overdoses.

---
class: light, animated, fadeIn
<h1><span>First Encounters</span></h1>


<img src="images/patches.png" alt="A picture of a black dog laying on a bed and partially covering an open laptop." width="25%"; height="25%"; style="float: left; margin-top:100px;">

<p style="float: right;"><h3><b>What I learned about First Encounters:</b></h3>

 <ul><li>Don't do any "real" coding...yet</li><br>
     <li>Ask for code books</li><br>
     <li>Understand the data's environment</li><br>
     <li>Understand the organization's environment</li><br>
     <li>Try to start creating "metadata"</li></ul>

     
???
So I learned alot clearly as seen here, but the main thing is to NOT jump into RStudio as soon as you get a dataset.<br>

If you do jump to coding, do the bare minimum to give you clues/info you need to start asking questions about the data and policies/processes in the organization <br> You can also document this early process by making a rough version of metadata. Where you track where data is coming from, what's in the data, who handles the data, etc.

<br>
A hard lesson I learned was that taking the time to take a step back and go through an iterative process of asking questions can give a bit more clarity and focus as you begin to start creating a data pipeline. <br>This is more important than just rushing to open RStudio because if you jump in with no information, head first, that pipeline can figuratively look and feel like this...

---
class: dark, center, middle, animated, fadeIn

<img src= "images/initial_dream.png", width = "100%", height = "100%">

???
but...
---
class: dark, center, middle, animated, fadeIn


<img src= "images/pl_2.png", width = "100%", height = "100%">

???
Taking the time to investigate will give you some clarity.Mind you that things are still messy, but a little bit of clarity can give you just enough to continue refining and building processes.<b>
Once you accept the fact that you need to repeatedly do this process it's safe to start building out the foundation of the pipeline...


---
class: light, animated, fadeIn

<h1><span>Main Points</span></h1>
<br><br>
<center><img src= "images/mp_2.png", width = "100%"></center>

???
by introducing actual environmental structure to the process now.

---
class: light, animated, fadeIn

<h1><span>Environmental Structures</span></h1>

<center><br><br><br>
<p><i><font size = "48px">"Data pipelines can exist in two environments that co-exist together; <font color = "#0B82B9"> <b>external</b> and <b>internal</b> environments.</font>"</font></i></p>
</center>

???
probably more sophisticated theories and ways to break this concept down even further, but being that it was my first time building a pipeline, it was more digestible for me to think about this concept as simply stating that a data pipeline has two environments that coexist and build off of each other.

---
class: light, animated, fadeIn

<h1><span>Environmental Structures</span></h1>

<center><img src= "images/internal_external.png", height = 450px></center>

???
So when starting out this was kinda what I realized mentally.<br><br>
I had external things to worry about outside of my computer<br><br>and internal things to worry about inside of my computer. To further explain this simplification let's quickly look at both...

---
class: light, animated, fadeIn

<h1><span>Environmental Structures</span></h1>

<img src="images/external.png" alt="A picture of Meghan Harris on her first day of work as a Data Specialist." width="25%"; height="25%"; style="float: left; margin-top:100px;">

<p style="float: right;"><h2><b>External Environment</b></h2>

 <ul><li>Data interactions, decisions, and processes that exist <b>externally</b> to your system.</li><br>
     <li>Administrative policies that affect the flow of data</li><br>
     <li>Technology that is used for data collection outside of R</li><br>
     <li>Data literacy of stakeholders and co-workers</li></ul></p><br>
     
???
In my xp, it was important to ID the external environment first. This overlapped with the investigation process mentioned earlier. More data sources you have, more involved the process is. Knowing all I could about the external environment, helped guide what the structure would look like internally.

---
class: light, animated, fadeIn

<h1><span>Environmental Structures</span></h1>

<img src="images/internal.png" alt="A picture of Meghan Harris on her first day of work as a Data Specialist." width="25%"; height="25%"; style="float: left; margin-top:100px;">

<p style="float: right;"><h2><b>Internal Environment</b></h2>

 <ul><li>Actual file structure and data flow <b>internally</b> on your system</li><br>
     <li>Flow of logic for data processing, analysis, and deliverable creation/deployment</li><br>
     <li>Method of data security and storage processes</li></ul></p>
     
???
ID internal environment is also essential. understanding the best way to set up your logic in things, nuances of any packages that you are, understanding what packages are essential for minimum functionality, Understanding the output needed for deliverables.<br><br>
Now, it should go without saying that this is not the reality...

---
class: light, animated, fadeIn

<h1><span>Environmental Structures</span></h1>

<center><img src= "images/interactions.png", height = 450px></center>

???
These environments don't exist in silos. Clearly external things can affect internal things and vice versa...<br>
This is a challenge that every data person knows well. Even if you don't think about the data's environment in this way, those of you that work in non-profit, academia, or government can probably relate to feeling like some thing in your work is affected by bureaucracy or conflicting interests/decision..<br><br>
What helped me to better navigate the interactions between the two environments was to repeatedly tackle each environment by introducing structure, documentation, and workflow processes and adjusting for the other environment as needed. You can try your best to account for all of this things at the beginning, but it's hard to know "what" will influence "what" every time.

---
class: light, animated, fadeIn

<h1><span>Environmental Structures</span></h1>

<h5><b>Examples of Structuring the External Environment</b></h5>
<center><b>Making Metadata</b>
<br>
<img src="images/metaexample.png", width = "50%", height = "50%"></center>

---
class: light, animated, fadeIn

<h1><span>Environmental Structures</span></h1>

<h5><b>Examples of Structuring the External Environment</b></h5>
<center><b>Identifying Organization Structure</b>
<br>
<img src="images/orgstructure.png", width = "60%"></center>

---

class: light, animated, fadeIn

<h1><span>Environmental Structures</span></h1>

<h5><b>Examples of Structuring the External Environment</b></h5>
<center><b>"Assess, Attempt, Repeat"</b>
<br>
<img src="images/aar.png", width = "45%", height = "40%"></center>

---
class: light, animated, fadeIn

<h1><span>Environmental Structures</span></h1>

<h5><b>Examples of Structuring the Internal Environment</b></h5>
<center><b>Make Clean File Structures</b>

---
class: light, animated, fadeIn

<h1><span>Environmental Structures</span></h1>

<h5><b>Examples of Structuring the Internal Environment</b></h5>
<center><b>Modularize Your Code</b>

---
class: light, animated, fadeIn

<h1><span>Environmental Structures</span></h1>

<h5><b>Examples of Structuring the Internal Environment</b></h5>
<center><b>Connect and Chain Where It Makes Sense</b>

---
class: light, animated, fadeIn

<h1><span>Main Points</span></h1>
<br><br>
<center><img src= "images/mp_3.png", width = "100%"></center>
---
class: light, animated, fadeIn

<h1><span>Main Points</span></h1>
<br><br>
<center><img src= "images/mp_4.png", width = "100%"></center>
